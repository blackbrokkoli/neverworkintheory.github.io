so my first question is do you recognize these folks um you may not so i'll give you some hints so this person on the left is probably the more famous of the two uh his name's icarus uh he's famous for being associated with human traits like overconfidence and you may have heard the phrase don't fly too close to the side but today i'm gonna focus on a different character in the story and that is his father daedalus he's a character i connect with more personally because he's a master craftsman and you know come on like a master craftsman but his inventions often have unintended consequences and i also have conventions that have unintended consequences and today i'm going to be talking about some of the unintended consequences of the work we've been doing on mining software build systems and we're going to use this icarus and deadlifts metaphor to to help make that explanation clear so let's start with our story so icarus and daedalus are trapped on the island of crete because daedalus has created some inventions that have angered the gods so they're on this island prison but daedalus has a plan so dead lewis is famous for using what he can get his hands on to create solutions so he's found some feathers and some wax from candles and he's going to try and fashion some now just like that we do the same thing when we're mining software repositories so i'll set this up with an example the other day i'm coding imagine that i'm writing some code and i wrote some code like this and i need an accompanying build system to turn it into an executable format so i write a little maven file and then i turn my attention to executing the build where of course i'm encountered with a build failure and i start to question my career choices and start to feel some feelings that perhaps i'm not too proud of but i decide to keep trundling through and i start seeing some more messages that make me feel some other feelings about my career choices but i still decide to keep pushing my way through and eventually i start to notice a pattern i start to notice it looks like class resolution is not happening properly and it's probably because a package is not being picked up and specifically it looks like log for j is missing and when i turn back to my code i notice you know i do have log for j included in my spec so what could be wrong well it turns out that log4j slightly changed the way that the package is referenced in maven central so after making this change i run my build again and i start to regain confidence in myself but then the researcher in me starts uh waking up i start wondering to myself why did i have to fix that by hand why can't my build tool fix this automatically

and thinking even more broadly why can't build systems sustain themselves and what what might that mean so if we were to have a self-sustaining build system we'd need different pieces of technology to make that happen we might need some tools to detect when when dependencies are incorrectly or underspecified we might need some tools to detect when build changes are necessary and anticipate those and we might need some tools to automate the application of fixes to build scripts now these are all different areas that my group at the university of waterloo is working on but today i'm going to focus a little bit on automated repair build scripts okay and specifically i'm going to tell you about this wax and feather solution we came up with called build medic okay so build medic operates on a build failure log and it at a very high level is broken down into three phases so first we try and classify the failure log based on what kind of problem is happening and then based on that we select a repair strategy we might want to try and then we'll apply the strategy and evaluate the revision now there are two possible outcomes we get either the same or another failure in which case we loop back and try again or we've resolved the problem and the build is fixed automatically for us

so we have our solution and daedalus and icarus their solution is to build these wings and they set off to the sky to get off of the island right so the next step is so they took off and they're flying away from their prison and now we're at a stage where we're ready to test out our wax and feather solution as well and what we're finding when we test our solution is that the build medic solution is actually pretty good so we tried it out on 84 unseen breakage pairs so we went mining through open source projects history to find examples of commits where the build was broken and then immediately fixed and what we found is that a little more than half of the solutions could be immediately fixed by our build medic tool and three quarters of those successes are done in one iteration so we didn't need to loop back to try multiple fixes even more than that we're not just making the build pass we're often doing exactly what developers did themselves so in those correct solutions about a third of the time we do exactly what the developers did and another 44 of the time we're modifying the same elements that the developers modified but we're changing things in a slightly different way

so what's the next part of our story so in the next part of our story we know that icarus and daedalus there is a limitation on their wings and that is that the wax from the wings will melt when uh when icarus or deadliest get too close to the sun and just like that our evaluation has some limitations right our limitations are that we're relying on historical breakages and we're assuming that those breakages are important we're assuming that when a build breakage occurs developers are rushing like these firefighters to put out the fire but what what happens when we take a closer look at some of this historical build data is that there are a couple of reasons why it's imperfect first there are actively ignored failures occurring and what we observed is that about 12 percent of passing builds have at least one actively ignored failing job and it's not just one or two jobs it's often up to 87 of what's been failing

um we also found there are passively ignored failures so uh two-thirds of failing builds are actually stale and you can see here there are a variety of different project characteristics some are fixing builds within a day some it takes a week others it takes months or even years

so we know from deadless and icarus myth that icarus ends up in the sea right and you might be leaving this talk feeling like something is horribly wrong and i don't want to leave you with that message right so i think this vision of a self-sustaining build is not dead okay there are two messages that you should take away one is if you're evil evil shane might say conclusion number one and angel shane might say conclusion number two so conclusion number one is that our evaluation is correct and your data is broken okay if that's how you feel well we have a proposed solution we should be looking at how much noise there is in build data and and keeping track of it and conclusion number two is that our evaluation is incorrect in which case i hope that you out there will help us to fix it so we need developers and other users to help us evaluate our tools and i hope you'll reach out thanks

you